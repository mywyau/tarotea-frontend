TaroTea — Pre-Launch & Early Post-Launch Checklist
=================================================

This file exists to capture the current state of the app and
act as a prompt for future hardening, iteration, and scale.

-------------------------------------------------
CORE FUNCTIONALITY
-------------------------------------------------

[-] Vocabulary levels load correctly from CDN JSON
[-] Word quizzes work for all available levels
[-] Audio quizzes play correct audio from CDN
[wip] Quiz gracefully handles:
    - empty category
    - malformed JSON
    - CDN unavailable
[wip] Free vs paid access enforced consistently
[wip] Locked content never leaks via client-only checks

-------------------------------------------------
AUTHENTICATION
-------------------------------------------------

[80%] Auth0 Google login works reliably
[ ] JWT verification happens server-side
[ ] Auth0 user ID (sub) is the primary key
[ ] User is created on first login via post-login API
[ ] Logging out clears local app state

-------------------------------------------------
BILLING (STRIPE)
-------------------------------------------------

[-] Free / Monthly / Yearly plans behave correctly
[-] Upgrade flow works end-to-end
[-] Billing portal opens correctly
[test] Past-due users lose Pro access
[test] Cancel-at-period-end respected
[test] Stripe is treated as source of truth
[-] No Pro access without valid subscription state

-------------------------------------------------
ACCOUNT DELETION
-------------------------------------------------

[-] User must type "DELETE" (case-insensitive) to confirm
[test] Deletion API is authenticated
[test] Deletion is idempotent (safe to retry)
[test] deleting_at lock prevents double deletion
[test] Stripe subscriptions are canceled BEFORE deletion
[ ] Deletion fails hard if Stripe cancellation fails
[-] App DB data is deleted
[-] Auth0 user is deleted
[ ] User is logged out after deletion
[ ] Re-login recreates a fresh account

-------------------------------------------------
DATABASE
-------------------------------------------------

[ ] users table documented (id, email, stripe_customer_id, deleting_at)
[ ] entitlements table documented (plan, status, dates)
[ ] Schema recorded in docs/database.md
[ ] Architecture recorded in docs/architecture.md
[ ] No secrets or user data committed to GitHub

-------------------------------------------------
ERROR HANDLING & SAFETY
-------------------------------------------------

[ ] Meaningful server-side logs for:
    - auth failures
    - billing failures
    - deletion failures
[ ] User-facing error messages are calm and clear
[ ] Account deletion shows retry message on failure
[ ] Critical APIs are safe to retry

-------------------------------------------------
LEGAL & TRUST
-------------------------------------------------

[ ] Privacy Policy page exists
[ ] Terms of Service page exists
[ ] Account deletion is easy to find
[ ] No dark patterns around billing or deletion

-------------------------------------------------
PERFORMANCE & RELIABILITY
-------------------------------------------------

[ ] CDN base URL configurable via env
[ ] Audio files cached efficiently
[ ] No hardcoded vocab data in app bundle
[ ] App still usable if CDN temporarily fails

-------------------------------------------------
SECURITY
-------------------------------------------------

[ ] No secrets in client bundle
[ ] No secrets committed to repo
[ ] Management tokens only used server-side
[ ] Rate limiting considered for:
    - account deletion
    - billing portal creation
    - auth endpoints

-------------------------------------------------
PRE-LAUNCH CONFIDENCE CHECK
-------------------------------------------------

[ ] Account creation tested
[ ] Upgrade → cancel → downgrade tested
[ ] Account deletion tested on real test user
[ ] Re-login after deletion tested
[ ] README updated and accurate

-------------------------------------------------
POST-LAUNCH (NOT REQUIRED DAY 1)
-------------------------------------------------

[ ] Stripe webhooks
[ ] Automated DB backups (Supabase Pro)
[ ] Analytics (lightweight)
[ ] Email notifications
[ ] Admin tools
[ ] More quiz types
[ ] Content expansion

-------------------------------------------------
PHILOSOPHY REMINDER
-------------------------------------------------

- Keep the app calm and focused
- Teach real spoken Cantonese
- Respect user data
- Ship improvements incrementally
- Avoid premature complexity
